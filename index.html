<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ุณูู ุงูุฏูุงูุฉ | ูุธุงู ุงูุชูุฑูุฏ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #f1f5f9; }
        .btn-green { background: linear-gradient(135deg, #059669 0%, #064e3b 100%); color: white; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function App() {
            const [view, setView] = useState("post");
            const [items, setItems] = useState([{ name: "", qty: "" }]);
            const [orderInfo, setOrderInfo] = useState({ shop: "", user: "", loc: "" });

            // ุฏุงูุฉ ุชุญููู ุงูู PDF (ุชุญููู ุงูุดุงุดุฉ ุฅูู ููู)
            const downloadPDF = () => {
                const element = document.getElementById('pdf-content');
                const opt = {
                    margin: 10,
                    filename: `Order-${Date.now()}.pdf`,
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { scale: 2, useCORS: true },
                    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
                };
                
                // ุฅุธูุงุฑ ุงููุญุชูู ูุคูุชุงู ููุชุตููุฑ ุซู ุฅุฎูุงุคู
                element.style.display = 'block';
                html2pdf().set(opt).from(element).save().then(() => {
                    element.style.display = 'none';
                });
            };

            const handleWhatsApp = (e) => {
                e.preventDefault();
                const message = `๐ฆ *ุทูุจ ุชูุฑูุฏ ุฌุฏูุฏ*\n*ุงููุญู:* ${orderInfo.shop}\n*ุงููุณุคูู:* ${orderInfo.user}\n*ุงููููุน:* ${orderInfo.loc}\n----------\n*ุงูุจุถุงุนุฉ:*\n${items.map((it, i) => `${i+1}. ${it.name} (${it.qty})`).join('\n')}`;
                window.open(`https://wa.me/249998615193?text=${encodeURIComponent(message)}`);
            };

            return (
                <div className="max-w-xl mx-auto p-4 min-h-screen">
                    <header className="text-center py-6">
                        <h1 className="text-3xl font-bold text-emerald-800">ุณูู ุงูุฏูุงูุฉ</h1>
                        <p className="text-gray-500">ูุธุงู ุชูุฑูุฏ ุงูุณูุน ูููุญูุงุช</p>
                    </header>

                    {/* ูููุฐุฌ ุงูุฅุฏุฎุงู */}
                    <div className="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
                        <form onSubmit={handleWhatsApp} className="space-y-4 text-right">
                            <div>
                                <label className="block text-sm font-bold mb-1">ุงุณู ุงููุญู</label>
                                <input required className="w-full p-3 bg-gray-50 border rounded-xl" 
                                    onChange={e => setOrderInfo({...orderInfo, shop: e.target.value})} />
                            </div>
                            <div>
                                <label className="block text-sm font-bold mb-1">ุงุณู ุงููุณุคูู</label>
                                <input required className="w-full p-3 bg-gray-50 border rounded-xl" 
                                    onChange={e => setOrderInfo({...orderInfo, user: e.target.value})} />
                            </div>
                            <div>
                                <label className="block text-sm font-bold mb-1">ุงููููุน (ุงููุฏููุฉ/ุงูุญู)</label>
                                <input required className="w-full p-3 bg-gray-50 border rounded-xl" 
                                    onChange={e => setOrderInfo({...orderInfo, loc: e.target.value})} />
                            </div>

                            <div className="border-t pt-4">
                                <h3 className="font-bold text-emerald-700 mb-3">ูุงุฆูุฉ ุงูุฃุตูุงู</h3>
                                {items.map((it, idx) => (
                                    <div key={idx} className="flex gap-2 mb-2">
                                        <input placeholder="ุงูุตูู" className="flex-1 p-2 border rounded-lg" required
                                            onChange={e => {
                                                const newItems = [...items];
                                                newItems[idx].name = e.target.value;
                                                setItems(newItems);
                                            }} />
                                        <input placeholder="ุงููููุฉ" className="w-24 p-2 border rounded-lg text-center" required
                                            onChange={e => {
                                                const newItems = [...items];
                                                newItems[idx].qty = e.target.value;
                                                setItems(newItems);
                                            }} />
                                    </div>
                                ))}
                                <button type="button" onClick={() => setItems([...items, {name: "", qty: ""}])} 
                                    className="text-emerald-600 font-bold text-sm">+ ุฅุถุงูุฉ ุตูู ุขุฎุฑ</button>
                            </div>

                            <div className="flex gap-2 pt-4">
                                <button type="submit" className="flex-1 py-4 btn-green rounded-xl font-bold text-lg">
                                    <i className="fab fa-whatsapp ml-2"></i> ุฅุฑุณุงู ูุงุชุณุงุจ
                                </button>
                                <button type="button" onClick={downloadPDF} className="w-1/3 py-4 bg-red-500 text-white rounded-xl font-bold">
                                    <i className="fas fa-file-pdf ml-2"></i> PDF
                                </button>
                            </div>
                        </form>
                    </div>

                    {/* ูุงูุจ ุงูู PDF ุงููุฎูู (ุณูุธูุฑ ููุท ุนูุฏ ุงูุชุญููู) */}
                    <div id="pdf-content" style={{display: 'none', background: 'white', padding: '40px', direction: 'rtl'}}>
                        <h1 style={{color: '#059669', textAlign: 'center', fontSize: '28px'}}>ุณูู ุงูุฏูุงูุฉ - ูุดู ุทูุจูุฉ</h1>
                        <hr style={{margin: '20px 0'}} />
                        <div style={{marginBottom: '20px', fontSize: '18px'}}>
                            <p><strong>ุงููุญู:</strong> {orderInfo.shop}</p>
                            <p><strong>ุงููุณุคูู:</strong> {orderInfo.user}</p>
                            <p><strong>ุงููููุน:</strong> {orderInfo.loc}</p>
                            <p><strong>ุงูุชุงุฑูุฎ:</strong> {new Date().toLocaleDateString('ar-EG')}</p>
                        </div>
                        <table style={{width: '100%', borderCollapse: 'collapse', marginTop: '20px'}}>
                            <thead>
                                <tr style={{background: '#059669', color: 'white'}}>
                                    <th style={{padding: '12px', border: '1px solid #ccc'}}>ู</th>
                                    <th style={{padding: '12px', border: '1px solid #ccc'}}>ุงูุตูู</th>
                                    <th style={{padding: '12px', border: '1px solid #ccc'}}>ุงููููุฉ</th>
                                </tr>
                            </thead>
                            <tbody>
                                {items.map((it, i) => (
                                    <tr key={i}>
                                        <td style={{padding: '10px', border: '1px solid #ccc', textAlign: 'center'}}>{i+1}</td>
                                        <td style={{padding: '10px', border: '1px solid #ccc'}}>{it.name}</td>
                                        <td style={{padding: '10px', border: '1px solid #ccc', textAlign: 'center'}}>{it.qty}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                        <div style={{marginTop: '40px', textAlign: 'center', color: '#888', fontSize: '12px'}}>
                            ุชู ุฅูุดุงุก ูุฐุง ุงููุณุชูุฏ ุนุจุฑ ููุตุฉ ุณูู ุงูุฏูุงูุฉ ุงูุฅููุชุฑูููุฉ
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
</body>
</html>
